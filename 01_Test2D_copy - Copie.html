<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Test-2D v1</title>
<script src='canvas.js'></script>
<script src='lib2D.js'></script>
<script src='lib3D.js'></script>
<script src='obj3D.js'></script>
<script>
///////////////////////////////////////////////////////////
{//==================================  Initialisations  ===
var timer1	= null;	// timer frames
function	program_init	()	{
//
//  Initialiser les objets du programme
//  Appelé 1 seule fois au début du prog (onload)
//- - - - - - - - - - - - - - - - - - - - - - - - - - - - -
	lib2D_init( 200 , 100 );
	creerLeMonde();
	start();	// Timer
}// -------------------------------------------------------
}
{//=================================  Gestion du Timer  ===
function	start()	{ 
	if (timer1 == null)
	timer1 = setInterval('drawFrame()', 1000/30); // timer
}// -------------------------------------------------------
function	stop()	{
	if (timer1 != null)
	{
		clearInterval(timer1);
		timer1=null; // est arrété
	}
}// -------------------------------------------------------
}
{//=================================  Gestion du Monde  ===
var obj1;
function	creerLeMonde		()			{
//
//  Créer tous les objets du monde
//- - - - - - - - - - - - - - - - - - - - - - - - - - - - -
obj1 = Obj3D_Creer();
	//figure 3D
	Obj3D_DefPoint(obj1 , 1, 1, 2, 'red');
	Obj3D_DefPoint(obj1 , 1, 4, 1, 'green');
	Obj3D_DefPoint(obj1 , 2, 2, 2, 'purple');
	Obj3D_DefPoint(obj1 , 4, 2, 1, 'blue');
	Obj3D_DefSegment(obj1 , 0, 1);
	Obj3D_DefSegment(obj1 , 1, 2);
	Obj3D_DefSegment(obj1 , 2, 3);
	Obj3D_DefSegment(obj1 , 3, 0);
	Obj3D_DefSegment(obj1 , 2, 0);
	//cube
	/*Obj3D_DefPoint(obj1 , 1, 1, 0, 'blue');
	Obj3D_DefPoint(obj1 , 1, 4, 0, 'red');
	Obj3D_DefPoint(obj1 , 2, 2, 0, 'green');
	Obj3D_DefPoint(obj1 , 4, 2, 0, 'purple');
	Obj3D_DefSegment(obj1 , 0, 1);
	Obj3D_DefSegment(obj1 , 1, 2);
	Obj3D_DefSegment(obj1 , 2, 3);
	Obj3D_DefSegment(obj1 , 3, 0);
	Obj3D_DefSegment(obj1 , 2, 0);*/


console.log(' Créer le monde fonctionne ');
}// -------------------------------------------------------
}
{//==============================  Gestion de la Frame  ===
var cptFrames = 0;
function tracer_cube() {

	lib3D_segment(0,0,0 , 0,1,0 , 'orange');
	lib3D_segment(-1,-1 , -1,-1,-1 ,'orange');

    lib3D_segment (0,0,0 , 0,1,0 , 'orange');
    lib3D_segment (1,1,0 , 0,1,0 , 'orange');
    lib3D_segment (1,1,0 , 1,0,0 , 'orange');
    lib3D_segment (0,0,0 , 1,0,0 , 'orange');

    lib3D_segment (0,0,1 , 0,1,1 , 'orange');
    lib3D_segment (1,1,1 , 0,1,1 , 'orange');
    lib3D_segment (1,1,1 , 1,0,1 , 'orange');
    lib3D_segment (0,0,1 , 1,0,1 , 'orange');

    lib3D_segment (0,0,0 , 0,0,1 , 'orange');
    lib3D_segment (0,1,0 , 0,1,1 , 'orange');
    lib3D_segment (1,1,0 , 1,1,1 , 'orange');
    lib3D_segment (1,0,0 , 1,0,1 , 'orange');


}
function	drawFrame()	{
//
// Retracer l'image courante du monde
// Appelé 50 fois par seconde
//- - - - - - - - - - - - - - - - - - - - - - - - - - - - -
	//cptFrames++;
	
	//-- Gérer l'animation
var angle = cptFrames/130 *2*Math.PI ;
var dx = 1 * Math.cos(angle);	// Délacement de dx,dy
var dy = 1 * Math.sin(angle);	// autour d'une ellipsezvar dy= 2 * Math.sin(angle);
var dz = 1 * Math.sin(angle);

	//-- Afficher les objets
	lib3D_echelle (30);
	
	lib3D_clear ( 'black' );	// Effacer l'écran
	lib3D_repere(2);			// Tracer le repère 2D
	
	lib3D_point (  10 ,  0 , 0, 'red' );
	lib3D_point ( -10 , 10 , 0, 'lime' );
	//Obj3D_Translater(obj1, 1,2,0);
	Obj3D_Pivoter(obj1, 0.05, "y");
	//Obj3D_PivoterZ(obj1, 0.70, "x");
	Obj3D_Translater(obj1, obj1.cx,obj1.cy,obj1.cz);
	Obj3D_Draw(obj1);
	//Obj3D_Draw1(obj1);  vue de des couche x y z en gros
	//Obj3D_Draw2(obj1);
	//Obj3D_Draw3(obj1);
	//tracer_cube();
}// -------------------------------------------------------
}
///////////////////////////////////////////////////////////
</script>
</head>
<body onload="program_init()">
    <h1>Test-2D v1</h1>

    <canvas id="canvas1"
            width="400" height="300"
            style="border:solid 1px #444">
    </canvas>
</body>
</html>
